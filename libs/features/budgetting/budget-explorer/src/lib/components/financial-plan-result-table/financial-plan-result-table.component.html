<div fxLayout="column" fxLayoutAlign="start">
  <!-- Balance Table -->
  <app-financial-plan-table classId="result" [type]="tableType" [rows$]="balanceTable$" [total$]="balance$"
    [allowAdd]="false" [nameField]="false">
  </app-financial-plan-table>

  <!-- Balance Actions-->
  <div fxLayout="row" fxLayoutAlign="space-between" fxFlex>
    <div fxLayout="row" fxLayoutAlign="start" fxFlex>
      <button mat-raised-button color="primary" class="mr-10px" (click)="downloadExcelFile()">
        <i class="far fa-file-excel"></i> {{"PL.TABLE.EXCEL-EXPORT" | transloco}} </button>

      <button mat-raised-button color="primary" (click)="linkChildModal()">
        <i class="fas fa-share-alt-square"></i> {{"PL.TABLE.LINK-CHILD" | transloco}}
      </button>
    </div>

    <div *ngIf="state$ | async as state">
      <button [disabled]="budgetSubmitting" style="margin-right: 20px;" mat-raised-button color="primary" (click)="submitBudget()">
        <span fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="10px" fxFlex>
          <i class="fa-solid fa-paper-plane"></i> 
          <span>{{"BUDGETS.SUBMIT" | transloco}}</span>
          <mat-spinner *ngIf="budgetSubmitting" diameter="15" ></mat-spinner>
        </span>
      </button>

      <button *ngIf="state.budget.status !== 1; else activateBudgetBtn" 
      [disabled]="budgetActivating" mat-raised-button color="primary" (click)="activateBudget()">
        <span fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="10px" fxFlex>
          <i class="fa-solid fa-paper-plane"></i> 
          <span>
            Activate Budget
          </span>
          <mat-spinner *ngIf="budgetActivating" diameter="15" ></mat-spinner>
        </span>
      </button>

      <ng-template #activateBudgetBtn>
        <button [disabled]="budgetActivating" mat-stroked-button color="primary" (click)="deActivateBudget(state.budget)">
          <span fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="10px" fxFlex>
            <i class="fa-solid fa-paper-plane"></i> 
            <span>
              Dectivate Budget
            </span>
            <mat-spinner *ngIf="budgetActivating" diameter="15" ></mat-spinner>
          </span>
        </button>
      </ng-template>
    </div>
  </div>
</div>